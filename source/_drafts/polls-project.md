---
title: 问卷调查网站设计
tags: agui.com
---
# 阿贵指数调查网站设计

***

## 前端原型设计

2016.02.19

* 草稿静态页面，包括一个左侧边栏和右侧的容器
* 右侧主页面，单页应用，本部分无刷新切换，初试原生AJAX，见博文：初尝AJAX

2016.02.20

* 创建一个基础服务器，模板引擎JADE
* 放置好相关静态文件，AJAX没有做封装，效果是点击三个图标后，右侧页面实现无刷新更新成一个p段落->完成
* 现在

右侧还只能更新一个静态的（即预先渲染好jade模板为文本或html等文件，然后替换目标位置的innerHTML），理想效果是右侧部分更新的页面也从模板引擎渲染而来，这个模板中不包括左边的边栏，渲染结果（HTML）替换右侧容器中的innerHTML
* res.render

它渲染发生在第一次进入到该页面时，并不是时刻跟着后台在渲染。表现为当服务器运行时，我修改了render的title，刷新页面，发现页面并没有更改，重启服务器之后，才被修改

* 这里就涉及到了前段渲染还是后端渲染的问题

如果采用前端渲染需要使用AngularJS或js前端模板引擎来完成渲染工作，后台只需要给前台数据即可，这样可以做到前后端分离，JADE还能用吗？经查能用，不过方案很纠结，一般直接交由前端渲染。后端渲染的话没弄明白如何在后台用JADE渲染同时让这些被渲染过的数据在前端做到无刷新更新（啊！因为是无刷新更新，整体更新前端那个模板即可，不用只纠结右侧了），后端直接渲染即可，因为左边栏没变，故没有影响。正好还写过后端渲染的测试网站，写起来比较顺手，但怎么单独调用渲染和返回AJAX数据，还需要研究，参见Express官网api中res.render(view [, locals] [, callback])部分，貌似有线索

* 选型方案：

经过一天的纠结，为了开发进度和个人对于代码分离的审美，同时为了移动端使用另一套实现方式Ionic来做app，同时还要适配不同设备，这样就有两套UI共同使用一套数据驱动。所以最后决定采用前端AngularJS，后端搭建提供rest风格api的Express数据服务器

* 在排Fedora下MD编辑器的坑时，在github上发现一个很漂亮的CSS框架Pure

* JADE在客户端也能用，但需要处理兼容性问题，因为他是用ES5写的

2016.02.21

* 今天开始学习AngularJS

借助的资料是ng-book(第一版)，看英文原版文档，实在看不懂的自己上翻译，再看不懂就去看中文版，看着看着发现，中文版翻译的真是呵呵...

2016.02.22

* 今天又纠结技术选型的问题
本来看ng-book原版文档学了一天了，突然注意到它的IE兼容性问题，貌似还比较难解决。就先把它放一放，准备换方案。又查到了几种，比如JADE在客户端使用，服务端预渲染，还有其他各种前端渲染引擎，又是纠结许久。后来出门待了一会冷静了一下，还是决定不换方案了，连静态页面都没写出来，后台还不怎么会，就开始想换来换去实在不妥，还是先用好一种工具把网站实现为好，大不了到时候叫掌柜一声令下，让客官们换浏览器不就得了嘛，多大点事儿，还是老老实实把产品做出来比啥都强，所以耽误了一个多小时，继续开始学习AngularJS

* 收获

在一个多小时的纠结中，又读到了好多关于前后端分离、架构、常用前端模板引擎及性能、jade的深入（比如服务端预渲染）等文章，算是一个小小的收获

今天去拉勾网逛的时候，还给顺带发现了一个bug，并给他们做了提交：关于170号段的正则匹配问题，最新的活动页面手机号的正则式和他们官网通用的正则时不统一（被简化了），结果导致了我的170号段无法参加活动，js也不加密不混淆，也没有用到统一的工具库（可能是因为只是活动页面的关系吧），还发现了他们的UI组件库

2016.02.26

* 服务器

这几天忙着跟了一下课程，顺带把自己托管于服务器重新部署了一下，把原有的nginx+php切换成了nginx+nodejs，原有的网站下线。初步学习了nginx服务器配置多网站的方法
